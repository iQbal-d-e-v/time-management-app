<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Study Tracker - Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    /* ---------- Global ---------- */
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 20px;
      background: #f4f7fa;
      color: #333;
    }
    h1 {
      text-align: center;
      margin-bottom: 10px;
      font-weight: 600;
      color: #222;
    }
    a {
      display: inline-block;
      margin-bottom: 20px;
      color: #4a90e2;
      text-decoration: none;
      font-weight: 500;
    }
    a:hover { text-decoration: underline; }

    /* ---------- Add Task Card ---------- */
    .add-task-card {
      background: #ffffff;
      max-width: 550px;
      margin: 0 auto 30px auto;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .add-task-card input, 
    .add-task-card select, 
    .add-task-card textarea {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #ccc;
      box-sizing: border-box;
      font-size: 14px;
      outline: none;
      transition: all 0.2s;
    }
    .add-task-card input:focus, 
    .add-task-card select:focus, 
    .add-task-card textarea:focus {
      border-color: #4a90e2;
      box-shadow: 0 0 5px rgba(74,144,226,0.3);
    }
    .add-task-card button {
      background: #4a90e2;
      color: white;
      padding: 12px;
      font-weight: 600;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .add-task-card button:hover { background: #357ABD; }

    /* ---------- Task Cards ---------- */
#taskContainer {
  max-width: 600px;        /* All cards same width */
  margin: 0 auto;          /* Center container */
  display: flex;
  flex-direction: column;
  gap: 18px;               /* Space between task cards */
}

/* Individual Task Card */
.task-card {
  background: #ffffff;
  padding: 18px;
  border-radius: 15px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
  display: flex;
  flex-direction: column;
  gap: 8px;
  transition: transform 0.2s, box-shadow 0.2s;
}

.task-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 25px rgba(0,0,0,0.12);
}

/* Task Title */
.task-title {
  font-weight: 600;
  font-size: 16px;
  color: #222;
}

/* Shift Label */
.task-shift {
  font-style: italic;
  color: #555;
}

/* Task Description */
.task-description {
  background: #f9f9f9;
  padding: 10px;
  border-radius: 10px;
  border: 1px solid #eee;
  font-size: 14px;
  color: #444;
}

/* Footer: Target Units + Complete Button */
.task-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 8px;
}

.complete-btn {
  background: #4CAF50;
  color: white;
  border: none;
  border-radius: 10px;
  padding: 8px 16px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.2s;
}

.complete-btn:hover {
  background: #399337;
}
  </style>
</head>
<body>
  <h1>ðŸŽ¯ Daily Study Game</h1>
  <p style="text-align:center"><a href="index.html">ðŸ“Š Go to Dashboard</a></p>

  <!-- Add Task Form -->
  <div class="add-task-card">
    <input type="date" id="date">
    <input type="text" id="title" placeholder="Task Title">
    <select id="shift">
      <option value="">Select Shift</option>
      <option value="Morning">Morning</option>
      <option value="Afternoon">Afternoon</option>
      <option value="Evening">Evening</option>
      <option value="Night">Night</option>
    </select>
    <textarea id="description" placeholder="Task Description"></textarea>
    <input type="number" id="targetUnits" placeholder="Target Units">
    <button onclick="addTask()">Add Task</button>
  </div>

  <!-- Task List -->
  <div id="taskContainer"></div>

  <script>
    let studyData = JSON.parse(localStorage.getItem("studyData")) || {};
    document.getElementById("date").value = new Date().toISOString().split("T")[0];

    function renderTasks() {
      const container = document.getElementById("taskContainer");
      container.innerHTML = "";
      const dates = Object.keys(studyData).sort();

      dates.forEach(date => {
        const tasks = studyData[date].tasks.filter(t => !t.completed);
        if (!tasks.length) return;

        const dateDiv = document.createElement("div");
        dateDiv.className = "task-date";
        dateDiv.textContent = date;
        container.appendChild(dateDiv);

        tasks.forEach((t,i) => {
          const card = document.createElement("div");
          card.className = "task-card";
          card.innerHTML = `
            <div class="task-title">${t.title}</div>
            <div class="task-shift">${t.shift || "No shift assigned"}</div>
            <div class="task-description">${t.description}</div>
            <div class="task-footer">
              <div>ðŸŽ¯ Target: ${t.targetUnits} units</div>
              <button class="complete-btn">Complete</button>
            </div>
          `;
          card.querySelector(".complete-btn").addEventListener("click", () => {
            let units = prompt(`How many units did you complete for "${t.title}"? (Max: ${t.targetUnits})`, t.targetUnits);
            if (units === null) return;
            units = parseInt(units);
            if (isNaN(units) || units < 0) { alert("Invalid number"); return; }
            if (units > t.targetUnits) units = t.targetUnits;

            t.completedUnits = units;
            t.completed = true;
            studyData[date].totalCompleted += units;
            localStorage.setItem("studyData", JSON.stringify(studyData));
            renderTasks();
          });
          container.appendChild(card);
        });
      });
    }

    function addTask() {
      const date = document.getElementById("date").value;
      const title = document.getElementById("title").value.trim();
      const shift = document.getElementById("shift").value;
      const description = document.getElementById("description").value.trim();
      const targetUnits = parseInt(document.getElementById("targetUnits").value);

      if (!title || !shift || !description || isNaN(targetUnits)) {
        alert("Please fill all fields");
        return;
      }

      if (!studyData[date]) studyData[date] = { tasks: [], totalTarget: 0, totalCompleted: 0 };

      studyData[date].tasks.push({ title, shift, description, targetUnits, completedUnits:0, completed:false });
      studyData[date].totalTarget += targetUnits;
      localStorage.setItem("studyData", JSON.stringify(studyData));

      document.getElementById("title").value = "";
      document.getElementById("description").value = "";
      document.getElementById("shift").value = "";
      document.getElementById("targetUnits").value = "";

      renderTasks();
    }

    renderTasks();
  </script>
</body>
</html>
